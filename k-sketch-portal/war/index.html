<!DOCTYPE html>
<html ng-app="myApp" lang="en">
  <head>
    <meta charset="utf-8">
    <title>K-Sketch: The Kinetic Sketch Pad!</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.css" rel="stylesheet">
    
    <!-- Additional styles for individual components -->
    <link href="css/additional.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="ico/favicon.png">
                                   
    <!-- Code for K-Sketch App Plugin -->
    <!-- Enable Browser History by replacing useBrowserHistory tokens with two hyphens -->
    
    <!-- BEGIN Browser History required section -->
    <link rel="stylesheet" type="text/css" href="history/history.css" />
    <script type="text/javascript" src="history/history.js"></script>
    <!-- END Browser History required section -->  
    
    <script type="text/javascript" src="swfobject.js"></script>
    
    <!-- SWF Save/Load JS Code Go HERE! This was originally taken from "KSketchCallBacks.js". -->
    <!-- script type="text/javascript" src="KSketchCallBacks.js"></script -->
    <script type="text/javascript">


	//Function to trigger a save procedure in the flash object
	//The flash object will call saveKSketchFile in return to pass the data from itself to javascript
    function initSave() {
		var swfObject = document.getElementById('KSketch2_Web');
		if(typeof swfObject !='undefined'){
			swfObject.save();//change load

		}
		else
		{
			alert('the swf object does not exist! Unable to save');
		}	
    } 
    
	//Function to trigger a save procedure in the flash object
	//The flash object will call saveKSketchFile in return to pass the data from itself to javascript	
	function saveKSketchFile(fileData) {
     	//var textAreaObject = document.getElementById('visibleTextData');
		//textAreaObject.value = fileData;	

		e = document.getElementById('SaveSketch');
		scope = angular.element(e).scope();
		scope.$apply(function() {
			scope.setData(fileData);
		});	
	}

	//Don't care about this, it just allows this example to load a file from
	//The text area
	function initLoad() {
		var textAreaObject = document.getElementById('visibleTextData');
		if(typeof textAreaObject !='undefined'){
			//alert(fileData);
			//loadKSketchFile(fileData);
			loadKSketchFile(textAreaObject.value);
		}
		else
		{
			alert('no text area!');
		}	
	}

	function fileLoad(fileData) {
		var cs = document.getElementById('cs');
		var vs = document.getElementById('vs');
		vs.className = vs.className.replace
			      ( /(?:^|\s)active(?!\S)/g , '' )
		cs.className += "active";

		var textAreaObject = document.getElementById('visibleTextData');
		textAreaObject.value = fileData; 

		loadKSketchFile(fileData);
	}

	//Function receives an xml string from anywhere
	//and asks the flash object to load it	
	function loadKSketchFile(fileData) {
		var swfObject = document.getElementById('KSketch2_Web');
		if(typeof swfObject !='undefined'){
			swfObject.load(fileData);//change load
		}
		else
		{
			alert('the swf object does not exist! Unable to save');
		}	
	}
    </script>
    
    <!-- JS code for SWF plugin. DO NOT REMOVE. -->
    <script type="text/javascript">
        // For version detection, set to min. required Flash Player version, or 0 (or 0.0.0), for no version detection. 
        var swfVersionStr = "10.2.0";
        // To use express install, set to playerProductInstall.swf, otherwise the empty string. 
        var xiSwfUrlStr = "playerProductInstall.swf";
        var flashvars = {};
        var params = {};
        params.quality = "high";
        params.bgcolor = "#ffffff";
        params.allowScriptAccess = "always";
        params.allowfullscreen = "true";
        var attributes = {};
        attributes.id = "KSketch2_Web";
        attributes.name = "KSketch2_Web";
        attributes.align = "middle";
        swfobject.embedSWF(
            "KSketch2_Web.swf", "flashContent", 
            "100%", "580", 
            swfVersionStr, xiSwfUrlStr, 
            flashvars, params, attributes);
        // JavaScript enabled so display the flashContent div in case it is not replaced with a swf object.
        swfobject.createCSS("#flashContent", "display:block;text-align:left;border:1px solid black;padding:1px");
    </script>
    
    <script src="https://apis.google.com/js/client.js?onload=OnLoadCallback"></script>
  </head>
  
  <body id="ksketchapp" ng-controller="FirstController" scrolling="no">
  
  	<!-- Top Bar -->
    <div id="topbar" class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" id="logo" href="#"><img style="height:36px" src="ico/KSketch-logo.png"></a>
          <div class="nav-collapse collapse">
            <p class="navbar-text pull-left">
              <!--Username and profile link goes here.-->             
              Hello, <a href="#" class="navbar-link"><span id="heading">{{name}}</span></a>!
              <input id="authorize-button" type="submit" class="button btn-inverse" onClick="handleAuthResult()" value="Login">
            </p>
            <ul class="nav pull-right">
              <li class="active">
                 <form name="search" class="navbar-search pull-right" method="post" action="">
                   <input type="text" class="search-query" id="search" name="search" placeholder="Search">
                   <input type="submit" class="button btn-inverse" value="&raquo;">
                 </form>
			  </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

	<!-- Main Body -->
    <div class="container-fluid">
      <div class="row-fluid">
      	
      	<!-- Navigation Sidebar (Access separate panes). -->
        <div class="span3">
          <div class="well sidebar-nav sidebar-nav-fixed">
            <ul class="nav nav-list">
              <!--This changes depending on current logged-in status.-->
              
              <li class="active"><a href="#Home" data-toggle="tab">Home</a></li>
              <li><a href="#Sketchbook" data-toggle="tab">My Sketchbook</a></li>
              <li id="cs"><a href="#CreateSketch" data-toggle="tab">Create a Sketch</a></li>
              <li id="vs"><a href="#ViewSketch" data-toggle="tab">View a Sketch</a></li>
            </ul>
          </div><!--/.well -->
        </div><!--/span-->
        
        <!-- Main Body -->
        <div class="span9">
        
        	<!-- Panes -->
        	<div class="tab-content" id="main">
        		
        		<!-- Home Pane -->
        		<div class="tab-pane active" id="Home">
		          <div class="hero-unit">
		            <h1 id="title1">Welcome to K-Sketch! </h1>
		            <br/>
		            <div class="row-fluid">
		            	<div class="span6">
		            		<iframe width="100%" height="250" src="http://www.youtube.com/embed/UYLR5Nf4mWs" frameborder="0" allowfullscreen></iframe>
		            	</div>
		            	<div class="span6">
		            		<p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
		            		<p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
		            	</div>
		            </div>            
		          </div>
		          <div class="row-fluid">
		            <div class="span4">
		              <h2>About K-Sketch</h2>
		              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
		              <p><a class="btn" href="#">Learn more &raquo;</a></p>
		            </div><!--/span-->
		            <div class="span4">
		              <h2>K-Sketch Developers</h2>
		              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
		              <p><a class="btn" href="#">Learn more &raquo;</a></p>
		            </div><!--/span-->
		            <div class="span4">
		              <h2>The Kinnovators!</h2>
		              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
		              <p><a class="btn" href="#">Learn more &raquo;</a></p>
		            </div><!--/span-->
		          </div><!--/row-->
		          <h2>Most Popular Sketches</h2>
		          <div class="row-fluid">
	            <div class="span4">
	              <h2>Lorem ipsum dolor</h2>
	              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
	              <p><a class="btn" href="#">View Me! &raquo;</a></p>
	            </div><!--/span-->
	            <div class="span4">
	              <h2>Sit amet, consectetur</h2>
	              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
	              <p><a class="btn" href="#">View Me! &raquo;</a></p>
	            </div><!--/span-->
	            <div class="span4">
	              <h2>Adipiscing elit.</h2>
	              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
	              <p><a class="btn" href="#">View Me! &raquo;</a></p>
	            </div><!--/span-->
	          </div><!--/row-->
        		</div>
        		
        		<!-- Sketchbook Pane -->
        		<div class="tab-pane" id="Sketchbook">
        			<!-- Stuff goes here. -->
        			<!-- We have to think of a better name for this! -->
        			<div class="row-fluid">
        			</div>
        		</div>
        		
        		<!-- Create Sketch Pane -->
        		<div class="tab-pane" id="CreateSketch">
					<!-- Stuff goes here. -->
					<div class="row-fluid">
						<div>
				        	<button class="btn btn-inverse btn-small" onclick="initSave()" data-toggle="modal" href="#SaveSketch">Save</button>
				            <button class="btn btn-inverse btn-small" onclick="initLoad()">Load</button>				        	
				        </div>
				        <div id="swfcontainer">
		        			<div id="flashContent">
					            <p>
					                To view this page ensure that Adobe Flash Player version 
					                10.2.0 or greater is installed. 
					            </p>
					            <script type="text/javascript"> 
					                var pageHost = ((document.location.protocol == "https:") ? "https://" : "http://"); 
					                document.write("<a href='http://www.adobe.com/go/getflashplayer'><img src='" 
					                                + pageHost + "www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player' /></a>" ); 
					            </script> 
					        </div>
					        <noscript>
					            <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="580" id="KSketch2_Web">
					                <param name="movie" value="KSketch2_Web.swf" />
					                <param name="quality" value="high" />
					                <param name="bgcolor" value="#ffffff" />
					                <param name="allowScriptAccess" value="always" />
					                <param name="allowFullScreen" value="true" />
					                <!--[if !IE]>-->
					                <object type="application/x-shockwave-flash" width="100%" height="580" data="KSketch2_Web.swf">
					                    <param name="quality" value="high" />
					                    <param name="bgcolor" value="#ffffff" />
					                    <param name="allowScriptAccess" value="always" />
					                    <param name="allowFullScreen" value="true" />
					                <!--<![endif]-->
					                <!--[if gte IE 6]>-->
					                    <p> 
					                        Either scripts and active content are not permitted to run or Adobe Flash Player version
					                        10.2.0 or greater is not installed.
					                    </p>
					                <!--<![endif]-->
					                    <a href="http://www.adobe.com/go/getflashplayer">
					                        <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash Player" />
					                    </a>
					                <!--[if !IE]>-->
					                </object>
					                <!--<![endif]-->
					            </object>
					        </noscript>
					    </div>					    					   
					    <div class="modal hide fade in" id="SaveSketch" style="display:none">
					    	<div class="modal-header">
								<a class="close" data-dismiss="modal">x</a>
								<h3 id="myUploadItems">Save Sketch</h3>
							</div>
							<div class="modal-body">
								<div class="control-group">
									<label class="control-label" for="sketchName">Sketch Name</label>
									<div class="controls">
								  		<input type="text" ng-model="fileName" id="sketchName"/>
									</div>
									<div class="controls">
									  <input type="text" id="visibleTextData" ng-model="fileData">
									</div>
								</div>
								<div class="control-group">
									<div class="controls">
									  <input type="submit" ng-click="save()" value="Submit" data-dismiss="modal"/>
									</div>
								</div>	
							</div>							
					    </div>       			       
					</div>
        		</div>
        		
        		<!-- View Sketch Pane -->
        		<div class="tab-pane" id="ViewSketch">
        			<!-- Stuff goes here. -->
        			<span style="display:none">{{fileData}}</span>       			
        				<!-- <ul>    					
        					<li ng-repeat="files in filearray">
        						<div class="row-fluid">
        							<div class="span2">{{files.id}}</div>
        							<div class="span3">{{files.owner}}</div>
	        						<div class="span3"><a href="#CreateSketch" data-toggle="tab" onClick="fileLoad('{{files.data}}')">{{files.name}}</a></div>
	        						<div class="span4"><input type="text" value="{{files.data}}"/></div>
	        					</div>	
        					</li>
        				</ul>		 -->
        			<ul>    					
        					<li ng-repeat="files in items.entities">
        						<div class="row-fluid">
        							<div class="span2">{{files.data.id}}</div>
        							<div class="span3">{{files.data.owner}}</div>
	        						<div class="span3"><a href="#CreateSketch" data-toggle="tab" onClick="fileLoad('{{files.data.fileData}}')">{{files.data.fileName}}</a></div>
	        						<div class="span4"><input type="text" value="{{files.data.fileData}}"/></div>
	        					</div>	
        					</li>
        				</ul>				
        		</div>
        	</div>
        </div><!--/span-->
      </div><!--/row-->

      <hr>

      <footer>
        <p>&copy; Richard C. Davis 2013</p>
      </footer>

    </div><!--/.fluid-container-->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="lib/angular/angular.min.js"></script>
    <script src="lib/angular/angular-resource.min.js"></script>
    <script src="js/controllers.js"></script>
    <script src="js/oauth2.js"></script>
    <script src="js/angular-http-auth.js"></script>
    <script src="js/app.js"></script>
    <!-- script src="../test/lib/angular/angular-mocks.js"></script -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap-transition.js"></script>
    <script src="js/bootstrap-alert.js"></script>
    <script src="js/bootstrap-modal.js"></script>
    <script src="js/bootstrap-dropdown.js"></script>
    <script src="js/bootstrap-scrollspy.js"></script>
    <script src="js/bootstrap-tab.js"></script>
    <script src="js/bootstrap-tooltip.js"></script>
    <script src="js/bootstrap-popover.js"></script>
    <script src="js/bootstrap-button.js"></script>
    <script src="js/bootstrap-collapse.js"></script>
    <script src="js/bootstrap-carousel.js"></script>
    <script src="js/bootstrap-typeahead.js"></script>

  </body>
</html>